<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>vocabCLI.modules.Study - vocabCLI 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">vocabCLI 0.0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">vocabCLI 0.0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for vocabCLI.modules.Study</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">questionary</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">typer</span>
<span class="kn">from</span> <span class="nn">Database</span> <span class="kn">import</span> <span class="n">createConnection</span><span class="p">,</span> <span class="n">createTables</span>
<span class="kn">from</span> <span class="nn">Dictionary</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">Exceptions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">questionary</span> <span class="kn">import</span> <span class="n">Style</span>
<span class="kn">from</span> <span class="nn">rich</span> <span class="kn">import</span> <span class="nb">print</span>
<span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span> <span class="nn">rich.panel</span> <span class="kn">import</span> <span class="n">Panel</span>
<span class="kn">from</span> <span class="nn">rich.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">Utils</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#####################</span>
<span class="c1"># REVISE FUNCTIONS #</span>
<span class="c1">#####################</span>


<div class="viewcode-block" id="start_revision"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.start_revision">[docs]</a><span class="k">def</span> <span class="nf">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="n">Cursor</span><span class="p">,</span> <span class="n">is_collection</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts the revision process.</span>
<span class="sd">    </span>
<span class="sd">    1. Fetches all the words in the collection from the database</span>
<span class="sd">    2. For each word in the collection, it prints out the word and its definition</span>
<span class="sd">    3. It asks the user if they want to set the word as learning</span>
<span class="sd">    4. If the user says yes, then the word is set as learning</span>
<span class="sd">    5. If the user says no, then the user is asked if they want to set the word as mastered</span>
<span class="sd">    6. If the user says yes, then the word is set as mastered</span>
<span class="sd">    7. If the user says no, then the user is asked if they want to stop revising</span>
<span class="sd">    8. If the user says yes, then the program stops revising, else it continues revising</span>

<span class="sd">    Args:</span>
<span class="sd">        c: cursor object</span>
<span class="sd">        is_collection: boolean to check if the revision is from a collection, default is False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">rows</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">Panel</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[reverse]Revising word: [bold green]</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span><span class="si">}</span><span class="s2">[/bold green][/reverse]&quot;</span><span class="p">,</span>
                <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">renderable</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span><span class="o">-</span><span class="n">count</span><span class="si">}</span><span class="s2"> word(s) to go. Keep revising! 🧠&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">definition</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">is_collection</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">check_learning</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="n">Panel</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Set [bold blue]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold blue] as [bold green]learning[/bold green] ?&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">sure</span> <span class="o">:=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
                <span class="n">set_learning</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="n">Panel</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;OK, not setting [bold blue]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold blue] as learning, you can always revise it via our collection ✍🏼&quot;</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># if word is not mastered then prompt user to set it as mastered</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">check_mastered</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="n">Panel</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Set [bold blue]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold blue] as [bold green]mastered[/bold green] ?&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">sure</span> <span class="o">:=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
                <span class="n">set_mastered</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="n">Panel</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;OK, not setting [bold blue]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold blue] as mastered, keep learning. ✍🏼&quot;</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;Press Y to Stop Revision. Enter to continue 📖&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sure</span> <span class="o">:=</span> <span class="n">typer</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)):</span>
                <span class="k">continue</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;OK, stopping revision. 🛑&quot;</span><span class="p">))</span>
            <span class="k">break</span></div>
    <span class="c1"># else:</span>
    <span class="c1">#     print(Panel(title=&quot;[b reverse red]  Error!  [/b reverse red]&quot;,</span>
    <span class="c1">#             title_align=&quot;center&quot;,</span>
    <span class="c1">#             padding=(1, 1),</span>
    <span class="c1">#             renderable=&quot;No words to revise in the selected category. Look up some more words first by using &#39;define&#39; command.&quot;)</span>
    <span class="c1">#     )</span>


<div class="viewcode-block" id="revise_all"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_all">[docs]</a><span class="k">def</span> <span class="nf">revise_all</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># sourcery skip: remove-redundant-if</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise all words in the database.</span>
<span class="sd">    </span>
<span class="sd">    1. If number is not specified, then all words are revised.</span>
<span class="sd">    2. If number is specified, then only that many words are revised.</span>
<span class="sd">    3. If there are no words in the database, then an exception is raised.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NoWordsInDBException: if there are no words in the database.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># checks if there are any words in the database and breaks out if there are none</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInDBException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_all_words</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInDBException</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">number</span><span class="p">,)</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="revise_tag"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_tag">[docs]</a><span class="k">def</span> <span class="nf">revise_tag</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># sourcery skip: remove-redundant-if</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise words in a specific tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>
<span class="sd">        tag: tag to revise, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if tag is not found</span>
    <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoSuchTagException</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">count_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NoSuchTagException</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where tag=? ORDER BY RANDOM()&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,)</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where tag=? ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">number</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="revise_learning"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_learning">[docs]</a><span class="k">def</span> <span class="nf">revise_learning</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise words in learning list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if no words learning</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInLearningListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_learning</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInLearningListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where learning=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where learning=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="revise_mastered"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_mastered">[docs]</a><span class="k">def</span> <span class="nf">revise_mastered</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise words in mastered list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if no words learning</span>

    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInMasteredListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_mastered</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInMasteredListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where mastered=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where mastered=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="revise_favorite"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_favorite">[docs]</a><span class="k">def</span> <span class="nf">revise_favorite</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise words in favorite list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInFavoriteListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_favorite</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInFavoriteListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where favorite=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where favorite=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div>


<div class="viewcode-block" id="revise_collection"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.revise_collection">[docs]</a><span class="k">def</span> <span class="nf">revise_collection</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">collectionName</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Revise words in a collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to revise, default is None.</span>
<span class="sd">        collectionName: name of the collection, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">collectionName</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoSuchCollectionException</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;SELECT word FROM collections where collection=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">collectionName</span><span class="p">,)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">NoSuchCollectionException</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="n">collectionName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collectionName</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT word FROM collections where collection=? ORDER BY RANDOM()&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">collectionName</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">is_collection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">collectionName</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT word FROM collections where collection=? ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">collectionName</span><span class="p">,</span> <span class="n">number</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">start_revision</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">is_collection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<span class="c1">#####################</span>
<span class="c1"># QUIZ FUNCTIONS #</span>
<span class="c1">#####################</span>


<div class="viewcode-block" id="start_quiz"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.start_quiz">[docs]</a><span class="k">def</span> <span class="nf">start_quiz</span><span class="p">(</span>
    <span class="n">c</span><span class="p">:</span> <span class="n">Cursor</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quizType</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># sourcery skip: remove-redundant-if</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts the quiz.</span>
<span class="sd">    </span>
<span class="sd">    1. Fetches all the words in the collection or in the database, depending on the quiz type.</span>
<span class="sd">    2. Breaks out if the collection has less than 4 words, as the minimum number of words in a quiz is 4.</span>
<span class="sd">    3. Sets the style of the quiz.</span>
<span class="sd">    4. Initializes the score and timer.</span>
<span class="sd">    5. Iterates over the words in the collection/database.</span>
<span class="sd">    6. Sets up the question.</span>
<span class="sd">    7. Fetches the correct answer for the question.</span>
<span class="sd">    8. Sets up the list of choices. If the quiz type is collection, the list of choices is made up of the correct answer and three fake answers from the collection. Otherwise, the list of choices is made up of the correct answer and three fake answers from the database.</span>
<span class="sd">    9. Asks the question to the user and checks if the answer is correct.</span>
<span class="sd">    10. If the answer is correct, increases the score and prints the success message. Otherwise, prints the failure message.</span>
<span class="sd">    11. Prints the quiz summary and inserts the quiz history into the database.</span>

<span class="sd">    Args:</span>
<span class="sd">        c: cursor object.</span>
<span class="sd">        type: type of the quiz. Must be one of &quot;all words&quot;, &quot;learning words&quot;, &quot;mastered words&quot;, &quot;favorite words&quot;, &quot;collection: collectionName&quot;, &quot;tag:tagName&quot;.</span>
<span class="sd">        collection: name of the collection, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">rows</span> <span class="o">:=</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()):</span>
        <span class="k">return</span>

    <span class="c1"># break out if -n &lt; 4</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NotEnoughWordsForQuizException</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotEnoughWordsForQuizException</span><span class="p">()</span>

        <span class="c1"># setting quiz style</span>
        <span class="n">fancy_style</span> <span class="o">=</span> <span class="n">Style</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;qmark&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#673ab7 bold&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;question&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#0000ff bold&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;answer&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#ffff00 bold&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;pointer&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#ffd700 bold&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;highlighted&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#0000ff bold&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#cc5454&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;separator&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#cc5454&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;instruction&quot;</span><span class="p">,</span> <span class="s2">&quot;fg:#673ab7 bold&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># initializing score and timer</span>
        <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tic</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

        <span class="c1"># iterating over questions</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

            <span class="c1"># setting up question</span>
            <span class="n">quiz_word</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="nb">print</span><span class="p">(</span>
                <span class="n">Panel</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[reverse]Question [bold green]#</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span><span class="si">}</span><span class="s2">[/bold green][/reverse]&quot;</span><span class="p">,</span>
                    <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                    <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">renderable</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Choose the correct definition for: [bold u blue]</span><span class="si">{</span><span class="n">quiz_word</span><span class="si">}</span><span class="s2">[/bold u blue]&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># answer</span>
            <span class="n">correct_definition</span> <span class="o">=</span> <span class="n">one_line_definition</span><span class="p">(</span><span class="n">quiz_word</span><span class="p">)</span>

            <span class="c1"># question list with the correct answer</span>
            <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="n">correct_definition</span><span class="p">]</span>

            <span class="c1"># if taking quiz on a collection then only fake choices from the collection otherwise the answer will be obvious</span>
            <span class="k">if</span> <span class="n">collection</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="s2">&quot;SELECT DISTINCT word FROM collections where collection=? and word!=? ORDER BY RANDOM() LIMIT 3&quot;</span><span class="p">,</span>
                    <span class="p">(</span>
                        <span class="n">collection</span><span class="p">,</span>
                        <span class="n">quiz_word</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>

            <span class="c1"># adding 3 fake choices from words in the database.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="s2">&quot;SELECT DISTINCT word FROM words where word!=? ORDER BY RANDOM() LIMIT 3&quot;</span><span class="p">,</span>
                    <span class="p">(</span><span class="n">quiz_word</span><span class="p">,),</span>
                <span class="p">)</span>
            <span class="n">choices</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">one_line_definition</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
            <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>

            <span class="n">user_choice</span> <span class="o">=</span> <span class="n">questionary</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">choices</span><span class="o">=</span><span class="n">choices</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="n">fancy_style</span><span class="p">,</span>
                <span class="n">show_selected</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">use_arrow_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">use_indicator</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">qmark</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">instruction</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">ask</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">user_choice</span> <span class="o">==</span> <span class="n">correct_definition</span><span class="p">:</span>
                <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ Correct! Score: [bold green]</span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">[/bold green]&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="n">Panel</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;❌ Incorrect! Score: [bold green]</span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">[/bold green]</span><span class="se">\n</span><span class="s2">Correct answer was: [bold green]</span><span class="si">{</span><span class="n">correct_definition</span><span class="si">}</span><span class="s2">[/bold green]&quot;</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">toc</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">toc</span> <span class="o">-</span> <span class="n">tic</span>

        <span class="n">seconds</span> <span class="o">=</span> <span class="n">diff</span><span class="o">.</span><span class="n">seconds</span>
        <span class="n">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">3600</span><span class="p">)</span> <span class="o">//</span> <span class="mi">60</span>
        <span class="n">seconds</span> <span class="o">=</span> <span class="n">seconds</span> <span class="o">%</span> <span class="mi">60</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">Panel</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;[b reverse white]  Quiz completed!  [/b reverse white]&quot;</span><span class="p">,</span>
                <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">renderable</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;🎯 [bold bright_magenta u]Score[/bold bright_magenta u]: [bold green]</span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">[/bold green] / [bold green]</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span><span class="si">}</span><span class="s2">[/bold green]</span><span class="se">\n</span><span class="s2">⏰ [bold bright_magenta u]Time Elapsed[/bold bright_magenta u]: [blue]</span><span class="si">{</span><span class="n">minutes</span><span class="si">:</span><span class="s2">0.0f</span><span class="si">}</span><span class="s2">M </span><span class="si">{</span><span class="n">seconds</span><span class="si">:</span><span class="s2">0.0f</span><span class="si">}</span><span class="s2">S[/blue]&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># inserting quiz history into the database</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;INSERT INTO quiz_history (type, datetime, question_count,points,duration) values (?, ?, ?, ?, ?)&quot;</span><span class="p">,</span>
            <span class="p">(</span>
                <span class="n">quizType</span><span class="p">,</span>
                <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">),</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">),</span>
                <span class="n">score</span><span class="p">,</span>
                <span class="n">diff</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="quiz_all"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_all">[docs]</a><span class="k">def</span> <span class="nf">quiz_all</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># sourcery skip: remove-redundant-if</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz all words in the database.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># checks if there are any words in the database and breaks out if there are none</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInDBException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_all_words</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInDBException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;all words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">number</span><span class="p">,)</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;all words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="quiz_tag"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_tag">[docs]</a><span class="k">def</span> <span class="nf">quiz_tag</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># sourcery skip: remove-redundant-if</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz words with a specific tag.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">        tag: tag to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if tag is not found</span>
    <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoSuchTagException</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">count_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NoSuchTagException</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tag</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where tag=? ORDER BY RANDOM()&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,)</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;tag: </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where tag=? ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">number</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;tag: </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="quiz_learning"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_learning">[docs]</a><span class="k">def</span> <span class="nf">quiz_learning</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz words in learning list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if no words learning</span>

    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInLearningListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_learning</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInLearningListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where learning=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;learning words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where learning=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;learning words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="quiz_mastered"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_mastered">[docs]</a><span class="k">def</span> <span class="nf">quiz_mastered</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz words in mastered list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if no words learning</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInMasteredListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_mastered</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInMasteredListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where mastered=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;mastered words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where mastered=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;mastered words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="quiz_favorite"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_favorite">[docs]</a><span class="k">def</span> <span class="nf">quiz_favorite</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz words in favorite list.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># will stop the execution if no words learning</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoWordsInFavoriteListException</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">count_favorite</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NoWordsInFavoriteListException</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words where favorite=1 ORDER BY RANDOM()&quot;</span><span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;favorite words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT DISTINCT word FROM words where favorite=1 ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">number</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="s2">&quot;favorite words&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<span class="c1"># TODO: - quiz will break and throw an error if words in the collection are not available in the api definition. Also, quiz_collection will be generally slow because it has to fetch the definition for each word in the option, find a way to make it fast.</span>
<div class="viewcode-block" id="quiz_collection"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.quiz_collection">[docs]</a><span class="k">def</span> <span class="nf">quiz_collection</span><span class="p">(</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">collectionName</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quiz words in a collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        number: number of words to quiz, default is None.</span>
<span class="sd">        collectionName: name of collection to quiz, default is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">collectionName</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">NoSuchCollectionException</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;SELECT word FROM collections where collection=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">collectionName</span><span class="p">,)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">NoSuchCollectionException</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="n">collectionName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">collectionName</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">number</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT word FROM collections where collection=? ORDER BY RANDOM()&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">collectionName</span><span class="p">,),</span>
        <span class="p">)</span>
        <span class="n">start_quiz</span><span class="p">(</span>
            <span class="n">c</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="n">collectionName</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;collection: </span><span class="si">{</span><span class="n">collectionName</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">number</span> <span class="ow">and</span> <span class="n">collectionName</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT word FROM collections where collection=? ORDER BY RANDOM() LIMIT ?&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">collectionName</span><span class="p">,</span> <span class="n">number</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="n">Panel</span><span class="p">(</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;[b reverse red]  Error!  [/b reverse red]&quot;</span><span class="p">,</span>
                    <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                    <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">renderable</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Collection &#39;</span><span class="si">{</span><span class="n">collectionName</span><span class="si">}</span><span class="s2">&#39; is empty&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="n">start_quiz</span><span class="p">(</span>
            <span class="n">c</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="n">collectionName</span><span class="p">,</span> <span class="n">quizType</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;collection: </span><span class="si">{</span><span class="n">collectionName</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<div class="viewcode-block" id="show_quiz_history"><a class="viewcode-back" href="../../../vocabCLI.modules.html#vocabCLI.modules.Study.show_quiz_history">[docs]</a><span class="k">def</span> <span class="nf">show_quiz_history</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show quiz history.</span>
<span class="sd">    </span>
<span class="sd">    1. Execute SQL SELECT statement to get all the rows from the quiz_history table.</span>
<span class="sd">    2. If there are no rows, print a message and return.</span>
<span class="sd">    3. Else print the quiz history in a table.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM quiz_history ORDER BY datetime DESC&quot;</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">Panel</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;[b reverse red]  Error!  [/b reverse red]&quot;</span><span class="p">,</span>
                <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">renderable</span><span class="o">=</span><span class="s2">&quot;No quiz attempts yet. Take a quiz to see your quiz history.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># ----------------- Table -----------------#</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header_style</span><span class="o">=</span><span class="s2">&quot;bold green&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Quiz Type&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;cyan&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Date &amp; Time of Attempt&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Score&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Duration&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
        <span class="n">history</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %b &#39;%y | %H:%M&quot;</span>
        <span class="p">)</span>
        <span class="n">score</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2"> seconds&quot;</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">history</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_section</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span></div>

    <span class="c1"># ----------------- Table -----------------#</span>
</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, AtharvaShah, AnayDeshpande
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>