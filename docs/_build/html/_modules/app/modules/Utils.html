<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>app.modules.Utils &mdash; VocabularyCLI 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> VocabularyCLI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">PythonCLI</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">VocabularyCLI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">app.modules.Utils</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <h1>Source code for app.modules.Utils</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">contextlib</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">playsound</span> <span class="kn">import</span> <span class="n">playsound</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">requests</span> <span class="kn">import</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">rich</span> <span class="kn">import</span> <span class="nb">print</span>
<span class="kn">from</span> <span class="nn">rich.panel</span> <span class="kn">import</span> <span class="n">Panel</span>
<span class="kn">from</span> <span class="nn">rich.columns</span> <span class="kn">import</span> <span class="n">Columns</span>
<span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span> <span class="nn">random_word</span> <span class="kn">import</span> <span class="n">RandomWords</span>
<span class="kn">from</span> <span class="nn">Database</span> <span class="kn">import</span> <span class="n">createConnection</span><span class="p">,</span> <span class="n">createTables</span>
<span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span> <span class="nn">rich.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">Dictionary</span> <span class="kn">import</span> <span class="n">connect_to_api</span><span class="p">,</span> <span class="n">definition</span>
<span class="kn">from</span> <span class="nn">Exceptions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<div class="viewcode-block" id="check_word_exists"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.check_word_exists">[docs]</a><span class="k">def</span> <span class="nf">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">conn</span><span class="o">=</span> <span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="c1"># check if word exists in the database</span>
    <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">WordNeverSearchedException</span><span class="p">):</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">WordNeverSearchedException</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="fetch_word_history"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.fetch_word_history">[docs]</a><span class="k">def</span> <span class="nf">fetch_word_history</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># sourcery skip: extract-method</span>
    <span class="sd">&quot;&quot;&quot; Fetches all instances of timestamp for a word from the database </span>

<span class="sd">    Args:</span>
<span class="sd">        word (str): word for which history is to be fetched</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT datetime FROM words WHERE word=? ORDER by datetime DESC&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">word</span><span class="p">,))</span>
        <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">table</span><span class="o">=</span><span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">header_style</span><span class="o">=</span><span class="s2">&quot;bold green&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;History&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;cyan&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">WordNeverSearchedException</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You have searched for [bold]</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">[/bold] </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> time before. 🔎&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You have searched for [bold]</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">[/bold] </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> times before. 🔎&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">history</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">history</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_section</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">WordNeverSearchedException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="add_tag"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.add_tag">[docs]</a><span class="k">def</span> <span class="nf">add_tag</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tagName</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tags the word in the vocabulary builder list.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be tagged.</span>
<span class="sd">        tagName (Optional[str], optional): Tag name which is to be added to the word and inserts it into the database. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="c1"># check if word exists in the database</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># if word already exists in the database with no tags, then add the tag to add words</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and tag is NULL&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET tag=? WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tagName</span><span class="p">,</span> <span class="n">query</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been tagged as [bold green]</span><span class="si">{</span><span class="n">tagName</span><span class="si">}</span><span class="s2">[/bold green]. ✅&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="c1"># if word already exists in the database with tags, then overwrite the tags</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and tag is not NULL&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET tag=? WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tagName</span><span class="p">,</span> <span class="n">query</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] tag has been changed to [bold green]</span><span class="si">{</span><span class="n">tagName</span><span class="si">}</span><span class="s2">[/bold green]. ✅&quot;</span><span class="p">))</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="remove_tag"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.remove_tag">[docs]</a><span class="k">def</span> <span class="nf">remove_tag</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Removes the tag from the word in the database</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): Word for which the tag is to be removed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT word FROM words WHERE word=? and tag is not NULL&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
            <span class="c1"># word exists with tag</span>
            <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET tag=NULL WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tags deleted for the word [bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue]. ✅&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] was not tagged. ❌&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># word exits without tag</span>
        <span class="k">raise</span> <span class="n">WordNeverSearchedException</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></div>




<span class="c1"># word doesn&#39;t exist</span>
<div class="viewcode-block" id="set_mastered"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_mastered">[docs]</a><span class="k">def</span> <span class="nf">set_mastered</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the word as mastered.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be set as mastered.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># warn user if word is never looked up before</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word is already mastered</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and mastered=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] is already marked as mastered. ✅&quot;</span><span class="p">))</span>
        <span class="k">return</span>


    <span class="c1"># check if word is set to learning</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and learning=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET learning=0 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>


    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET mastered=1 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been set as [bold green]mastered[/bold green]. Good work! ✅&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="set_unmastered"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_unmastered">[docs]</a><span class="k">def</span> <span class="nf">set_unmastered</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the word as unmastered.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be set as unmastered.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1">#check if word exists in database</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word is already mastered</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and mastered=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] was never mastered. ❌&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET mastered=0 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been set as [bold red]learning[/bold red]. Remember to practice it.&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="set_learning"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_learning">[docs]</a><span class="k">def</span> <span class="nf">set_learning</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the word as learning.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be set as learning.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># warn user if word is never looked up before</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word is already mastered</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and mastered=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="c1"># TODO add a typer prompt to ask if the user wants to move word from mastered to learning</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET mastered=0 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>

    <span class="c1"># check if word is already learning</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and learning=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] is already marked as learning. ✅&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="c1"># set word as learning</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET learning=1 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been set as [bold green]learning[/bold green]. Keep revising! 🧠&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="set_unlearning"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_unlearning">[docs]</a><span class="k">def</span> <span class="nf">set_unlearning</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the word as unlearning.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be set as unlearning.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1">#check if word exists in database</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word is not already unlearned</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and learning=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] was never learning. ❌&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="c1"># check if word is already learning</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and learning=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET learning=0 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>

    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been removed from [bold red]learning[/bold red].&quot;</span><span class="p">)</span>    <span class="p">)</span></div>




<div class="viewcode-block" id="set_favorite"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_favorite">[docs]</a><span class="k">def</span> <span class="nf">set_favorite</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the word as favorite.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be set as favorite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># warn user if word is never looked up before</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word is already favorite</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and favorite=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] is already marked as [bold green]favorite[/bold green]. 💙&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET favorite=1 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been set as [bold green]favorite[/bold green]. 💙&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="set_unfavorite"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.set_unfavorite">[docs]</a><span class="k">def</span> <span class="nf">set_unfavorite</span><span class="p">(</span><span class="n">query</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove the word from favorite list.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        query (str): Word which is to be removed from favorite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1">#check if word exists in database</span>
    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="c1"># check if word was never favorited</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM words WHERE word=? and favorite=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] was never favorite. ❌&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="c1"># set word to favorite</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE words SET favorite=0 WHERE word=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>

    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold blue]</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">[/bold blue] has been removed from [bold red]favorite[/bold red]. ✅&quot;</span><span class="p">))</span>   </div>


<div class="viewcode-block" id="count_all_words"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.count_all_words">[docs]</a><span class="k">def</span> <span class="nf">count_all_words</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Counts the distinct number of words in the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Total word count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;SELECT DISTINCT word FROM words&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>    </div>


<div class="viewcode-block" id="count_mastered"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.count_mastered">[docs]</a><span class="k">def</span> <span class="nf">count_mastered</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Counts the distinct number of mastered words in the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Total mastered word count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE mastered=1&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>    </div>


<div class="viewcode-block" id="count_learning"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.count_learning">[docs]</a><span class="k">def</span> <span class="nf">count_learning</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Counts the distinct number of learning words in the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Total learning word count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE learning=1&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span></div>

<div class="viewcode-block" id="count_favorite"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.count_favorite">[docs]</a><span class="k">def</span> <span class="nf">count_favorite</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Counts the distinct number of favorite words in the database</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Total favorite word count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE favorite=1&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span></div>

<div class="viewcode-block" id="count_tag"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.count_tag">[docs]</a><span class="k">def</span> <span class="nf">count_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Counts the distinct number of words in the database with a particular tag</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Total word count of specific tag</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE tag=?&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,))</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span></div>



<span class="c1"># todo @atharva: keep recalling function until dictionary definition is found. Do not return undefined words.</span>
<div class="viewcode-block" id="get_random_word_definition_from_api"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.get_random_word_definition_from_api">[docs]</a><span class="k">def</span> <span class="nf">get_random_word_definition_from_api</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets a random word from the random-words package. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">random_word</span><span class="o">=</span><span class="n">RandomWords</span><span class="p">()</span><span class="o">.</span><span class="n">get_random_word</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A Random Word for You: [bold green]</span><span class="si">{</span><span class="n">random_word</span><span class="si">}</span><span class="s2">[/bold green]&quot;</span><span class="p">))</span>
    <span class="n">definition</span><span class="p">(</span><span class="n">random_word</span><span class="p">)</span></div>



<div class="viewcode-block" id="get_random_word_from_learning_set"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.get_random_word_from_learning_set">[docs]</a><span class="k">def</span> <span class="nf">get_random_word_from_learning_set</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets a random word from the vocabulary builder list.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag (Optional[str], optional): Tag from which the random word should be. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE tag=? AND mastered=0 ORDER BY RANDOM() LIMIT 1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE mastered=0 ORDER BY RANDOM() LIMIT 1&quot;</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;You have no words in your vocabulary builder learning list. 👀&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A Random word from your [bold blue]learning[/bold blue] words list: [bold blue]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold blue]&quot;</span><span class="p">))</span></div>
            <span class="c1"># Uncomment the below line to get the definition of the word as well</span>
            <span class="c1"># definition(row[0])</span>



<div class="viewcode-block" id="get_random_word_from_mastered_set"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.get_random_word_from_mastered_set">[docs]</a><span class="k">def</span> <span class="nf">get_random_word_from_mastered_set</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets a random word with definition from the mastered words list.</span>

<span class="sd">    Args:</span>
<span class="sd">        tag (Optional[str], optional): Tag from which the mastered word should be. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE tag=? AND mastered=1 ORDER BY RANDOM() LIMIT 1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE mastered=1 ORDER BY RANDOM() LIMIT 1&quot;</span><span class="p">)</span>
    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;You have not mastered any words yet. 👀&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A Random word from your [bold green]mastered[/bold green] words list: [bold green]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[/bold green]&quot;</span><span class="p">))</span></div>
            <span class="c1"># Uncomment the below line to get the definition of the word as well</span>
            <span class="c1"># definition(row[0])</span>




<span class="c1"># FIXME @atharva: debug only tag argument 🐞</span>
<div class="viewcode-block" id="show_list"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.show_list">[docs]</a><span class="k">def</span> <span class="nf">show_list</span><span class="p">(</span>
    <span class="n">favorite</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">learning</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">mastered</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">tag</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">date</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">last</span><span class="p">:</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">most</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
    <span class="c1"># sourcery skip: low-code-quality</span>
    <span class="sd">&quot;&quot;&quot;Gets all the words in the vocabulary builder list.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        favorite (bool, optional): If True, gets list of favorite words. Defaults to False.</span>
<span class="sd">        learning (bool, optional): If True, gets list of learning words. Defaults to False.</span>
<span class="sd">        mastered (bool, optional): If True, gets list of mastered words. Defaults to False.</span>
<span class="sd">        tag (string, optional): Gets the list of words of the mentioned tag. Defaults to None.</span>
<span class="sd">        date (string, optional): Get a list of words from a particular date. Defaults to None.</span>
<span class="sd">        last (string, optional):&quot;Get a list of n last searched words. Defaults to None.</span>
<span class="sd">        most (string, optional): Get a list of n most searched words. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">mastered</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE mastered=1&quot;</span><span class="p">)</span>
        <span class="n">success_message</span> <span class="o">=</span> <span class="s2">&quot;[bold green]Mastered[/bold green] words&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You have not [bold green]mastered[/bold green] any words yet. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">learning</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE learning=1&quot;</span><span class="p">)</span>
        <span class="n">success_message</span><span class="o">=</span><span class="s2">&quot;[bold blue]Learning[/bold blue] words&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You have not added any words to the [bold blue]learning list[/bold blue] yet. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">favorite</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE favorite=1&quot;</span><span class="p">)</span>
        <span class="n">success_message</span><span class="o">=</span><span class="s2">&quot;[bold gold1]Favorite[/bold gold1] words&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You have not added any words to the [bold gold1]favorite[/bold gold1] list yet. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">date</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SELECT DISTINCT word FROM words where datetime &gt; datetime(&#39;now&#39; , &#39;-</span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> days&#39;)&quot;</span><span class="p">)</span>
        <span class="n">date_today</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
        <span class="n">date_before</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="n">success_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Words added to the vocabulary builder list from [bold blue]</span><span class="si">{</span><span class="n">date_before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">[/bold blue] TO [bold blue]</span><span class="si">{</span><span class="n">date_today</span><span class="si">}</span><span class="s2">[/bold blue]&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;No records found within this date range ❌&quot;</span>

    <span class="k">elif</span> <span class="n">last</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words ORDER BY datetime DESC LIMIT ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">last</span><span class="p">,))</span>
        <span class="n">success_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Last [bold blue]</span><span class="si">{</span><span class="n">last</span><span class="si">}</span><span class="s2">[/bold blue] words searched&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You haven&#39;t searched for any words yet. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">tag</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words WHERE tag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,))</span>
        <span class="n">success_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Words with tag [bold magenta]</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">[/bold magenta]&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;No words found with the tag </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">most</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT word, COUNT(word) AS `word_count` FROM words GROUP BY word ORDER BY `word_count` DESC LIMIT ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">most</span><span class="p">,))</span>
        <span class="n">success_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Top [bold blue]</span><span class="si">{</span><span class="n">most</span><span class="si">}</span><span class="s2">[/bold blue] most searched words&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You haven&#39;t searched for any words yet. ❌&quot;</span>

    <span class="k">elif</span> <span class="n">favorite</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">learning</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">mastered</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">last</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">most</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT DISTINCT word FROM words&quot;</span><span class="p">)</span>
        <span class="n">success_message</span><span class="o">=</span><span class="s2">&quot;Here is your list of words&quot;</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;You have no words in your vocabulary builder list. ❌&quot;</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">error_message</span><span class="o">=</span><span class="s2">&quot;Invalid arguments passed. You cannot pair those together. ❌&quot;</span>


    <span class="n">rows</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="n">error_message</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">success_message</span><span class="si">}</span><span class="s2"> [bold blue][</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span><span class="si">}</span><span class="s2">][/bold blue]&quot;</span><span class="p">))</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[deep_pink4]</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[deep_pink4]&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Columns</span><span class="p">(</span><span class="n">rows</span><span class="p">))</span></div>


<div class="viewcode-block" id="delete_all"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_all">[docs]</a><span class="k">def</span> <span class="nf">delete_all</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Deletes all the words from the database. &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">rowcount</span><span class="o">=</span><span class="n">count_all_words</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;[bold red]Nothing to delete.[/bold red] Look up some words first. 🔎&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM words&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All words[</span><span class="si">{</span><span class="n">rowcount</span><span class="si">}</span><span class="s2">] [bold red]deleted[/bold red] from all your lists. ✅&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="delete_mastered"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_mastered">[docs]</a><span class="k">def</span> <span class="nf">delete_mastered</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Deletes all the mastered words from the database. &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="n">rowcount</span><span class="o">=</span><span class="n">count_mastered</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;[bold red]No words in your mastered list.[/bold red] Add some first. ➕&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM words WHERE mastered=1&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All [bold green]mastered[/bold green] words[</span><span class="si">{</span><span class="n">rowcount</span><span class="si">}</span><span class="s2">] [bold red]deleted[/bold red] from your lists. ✅&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="delete_learning"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_learning">[docs]</a><span class="k">def</span> <span class="nf">delete_learning</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Deletes all the learning words from the database.&quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="n">rowcount</span><span class="o">=</span><span class="n">count_learning</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;[bold red]No words in your learning list.[/bold red] Add some first. ➕&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM words WHERE learning=1&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All [bold blue]learning[/bold blue] words[</span><span class="si">{</span><span class="n">rowcount</span><span class="si">}</span><span class="s2">][bold red] deleted[/bold red] from your lists. ✅&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="delete_favorite"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_favorite">[docs]</a><span class="k">def</span> <span class="nf">delete_favorite</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Deletes all the favorite words from the database.&quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="n">rowcount</span><span class="o">=</span><span class="n">count_favorite</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;[bold red]No words in your favorite list.[/bold red] Add some first. ➕&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM words WHERE favorite=1&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All [bold gold1]favorite[/bold gold1] words[</span><span class="si">{</span><span class="n">rowcount</span><span class="si">}</span><span class="s2">][bold red] deleted[/bold red] from your lists. ✅&quot;</span><span class="p">))</span></div>



<div class="viewcode-block" id="delete_words_from_tag"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_words_from_tag">[docs]</a><span class="k">def</span> <span class="nf">delete_words_from_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes all the words from a particular tag from the database.&quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="n">rowcount</span><span class="o">=</span><span class="n">count_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rowcount</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold red]No words in tag </span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">.[/bold red] Add some first. ➕&quot;</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM words WHERE tag=?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,))</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All words[</span><span class="si">{</span><span class="n">rowcount</span><span class="si">}</span><span class="s2">] with tag [bold magenta]</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">[/bold magenta] [bold red]deleted[/bold red] from your lists. ✅&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="delete_word"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.delete_word">[docs]</a><span class="k">def</span> <span class="nf">delete_word</span><span class="p">(</span><span class="n">query</span><span class="p">:</span><span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes a word from the database.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): Word to be deleted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="n">check_word_exists</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

    <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;DELETE FROM words WHERE word=?&quot;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span><span class="n">query</span><span class="p">,))</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">rowcount</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[bold red]Word </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> deleted[/bold red] from your lists. ✅&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="get_lookup_rate"><a class="viewcode-back" href="../../../app.modules.html#app.modules.Utils.get_lookup_rate">[docs]</a><span class="k">def</span> <span class="nf">get_lookup_rate</span><span class="p">(</span><span class="n">today</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">week</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the learning rate of the user.&quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">=</span><span class="n">createConnection</span><span class="p">()</span>
    <span class="n">c</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">today</span><span class="p">:</span>
        <span class="c1"># get todays learning words</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)=date(&#39;now&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_today</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># get yesterdays learning words</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)=date(&#39;now&#39;, &#39;-1 day&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_yesterday</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">percentage</span><span class="o">=</span><span class="nb">round</span><span class="p">((</span><span class="n">learning_count_today</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">learning_count_today</span><span class="o">-</span><span class="n">learning_count_yesterday</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">percentage</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🚀 You have looked up [bold green]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold green] [u]MORE[/u] words today compared to yesterday.</span><span class="se">\n</span><span class="s2">[violet]Today[/violet]: </span><span class="si">{</span><span class="n">learning_count_today</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Yesterday[/violet]: </span><span class="si">{</span><span class="n">learning_count_yesterday</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;😓 You have looked up [bold red]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold red] [u]LESS[/u] words today compared to yesterday.</span><span class="se">\n</span><span class="s2">[violet]Today[/violet]: </span><span class="si">{</span><span class="n">learning_count_today</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Yesterday[/violet]: </span><span class="si">{</span><span class="n">learning_count_yesterday</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">week</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-7 day&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_week</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-14 day&#39;) AND date(datetime)&lt;date(&#39;now&#39;, &#39;-7 day&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_last_week</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">percentage</span><span class="o">=</span><span class="nb">round</span><span class="p">((</span><span class="n">learning_count_week</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">learning_count_week</span><span class="o">-</span><span class="n">learning_count_last_week</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">percentage</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🚀 You have looked up [bold green]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold green] [u]MORE[/u] words this week compared to last week.</span><span class="se">\n</span><span class="s2">[violet]This week[/violet]: </span><span class="si">{</span><span class="n">learning_count_week</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last week[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_week</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;😓 You have looked up [bold red]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold red] [u]LESS[/u] words this week compared to last week.</span><span class="se">\n</span><span class="s2">[violet]This week[/violet]: </span><span class="si">{</span><span class="n">learning_count_week</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last week[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_week</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">month</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-1 month&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_month</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-2 month&#39;) AND date(datetime)&lt;date(&#39;now&#39;, &#39;-1 month&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_last_month</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">percentage</span><span class="o">=</span><span class="nb">round</span><span class="p">((</span><span class="n">learning_count_month</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">learning_count_month</span><span class="o">-</span><span class="n">learning_count_last_month</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">percentage</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🚀 You have looked up [bold green]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold green] [u]MORE[/u] words this month compared to last month.</span><span class="se">\n</span><span class="s2">[violet]This month[/violet]: </span><span class="si">{</span><span class="n">learning_count_month</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last month[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_month</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;😓 You have looked up [bold red]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold red] [u]LESS[/u] words this month compared to last month.</span><span class="se">\n</span><span class="s2">[violet]This month[/violet]: </span><span class="si">{</span><span class="n">learning_count_month</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last month[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_month</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">year</span><span class="p">:</span>
        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-1 year&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_year</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT COUNT(DISTINCT word) FROM words WHERE date(datetime)&gt;=date(&#39;now&#39;, &#39;-2 year&#39;) AND date(datetime)&lt;date(&#39;now&#39;, &#39;-1 year&#39;)&quot;</span><span class="p">)</span>
        <span class="n">learning_count_last_year</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">percentage</span><span class="o">=</span><span class="nb">round</span><span class="p">((</span><span class="n">learning_count_year</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">learning_count_year</span><span class="o">-</span><span class="n">learning_count_last_year</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">percentage</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🚀 You have looked up [bold green]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold green] [u]MORE[/u] words this year compared to last year.</span><span class="se">\n</span><span class="s2">[violet]This year[/violet]: </span><span class="si">{</span><span class="n">learning_count_year</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last year[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_year</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;😓 You have looked up [bold red]</span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">%[/bold red] [u]LESS[/u] words this year compared to last year.</span><span class="se">\n</span><span class="s2">[violet]This year[/violet]: </span><span class="si">{</span><span class="n">learning_count_year</span><span class="si">}</span><span class="s2"> words.</span><span class="se">\n</span><span class="s2">[violet]Last year[/violet]: </span><span class="si">{</span><span class="n">learning_count_last_year</span><span class="si">}</span><span class="s2"> words.&quot;</span><span class="p">))</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="s2">&quot;[bold red] you cannot combine options with learning rate command[/bold red] ❌&quot;</span><span class="p">))</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, AtharvaShah, AnayDeshpande.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
